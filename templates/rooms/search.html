{% extends "base.html" %}
{% load room_tag %}

{% block page_title %}
    Search
{% endblock page_title %}

{% block content %}

    <h2>Search!</h2>
    <h4>search by {{ city }} </h4>

    <form method="get" action="{% url 'rooms:search'  %}">
        {{form.as_ul}}
        <button>Search</button>
    </form>
<h1>Results</h1>
{% csrf_token %}
{% for room in page.object_list %}
   <a href="{% url 'rooms:detail' room.pk %}" > 
    <h3> {{ room.city }} </h3>
    <h4>{{ room.description }}</h4>   
   </a>
{% endfor %}

{% for page in page.paginator.page_range %}

    {% if 'page=' in request.GET.urlencode %}
        <a href="?{{ request.GET.urlencode|change_page:page }}">{{ page }}</a>   
    {% else %}
        <a href="?{{ request.GET.urlencode }}&page={{ page }}">{{ page }}</a>
    {% endif %}
      
{% endfor %}

<h5>
    {% if page.has_previous %}
        {% if 'page=' in request.GET.urlencode %}
            <a href="?{{ request.GET.urlencode|previous_page }}">Previous</a>   
        {% else %}
            <a href="?{{ request.GET.urlencode}}&page={{page.previous_page_number}}">Previous</a>
        {% endif %}

    {% endif %}
        Page {{ page.number }} of {{ page.paginator.num_pages }}
    {% if page.has_next %}  
        {% if 'page=' in request.GET.urlencode %}
            <a href="?{{ request.GET.urlencode|next_page }}">Next</a>
        {% else %}
            <a href="?{{ request.GET.urlencode}}&page={{page.next_page_number}}">Next</a>
        {% endif %}
    {% endif %}
</h5>


{% endblock content %}

{% block search-bar %}

{% endblock search-bar %}